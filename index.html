<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>voidshop | I tuoi articoli void//</title>
<style>
  body {
    font-family: Arial, sans-serif;
    max-width: 900px;
    margin: auto;
    padding: 1rem;
    background: #fff;
    color: #000;
  }
  header {
    text-align: center;
    margin-bottom: 2rem;
  }
  header h1 {
    font-weight: 900;
    font-size: 2.5rem;
  }
  .product {
    border: 1px solid #ccc;
    padding: 1rem;
    margin-bottom: 1rem;
    border-radius: 8px;
    background: #f9f9f9;
  }
  .product h2 {
    margin-top: 0;
  }
  label {
    display: block;
    margin: 0.4rem 0 0.2rem 0;
    font-weight: 600;
  }
  select, input[type=number] {
    width: 100%;
    padding: 0.3rem;
    font-size: 1rem;
    border-radius: 4px;
    border: 1px solid #aaa;
  }
  #cart-total {
    font-weight: 900;
    font-size: 1.4rem;
    text-align: right;
    margin-top: 1rem;
  }
  #paypal-button-container {
    margin-top: 1.5rem;
    text-align: center;
  }
</style>
</head>
<body>

<header>
  <h1>voidshop</h1>
  <p>I tuoi articoli <strong>void//</strong></p>
</header>

<main>

  <div class="product" data-price="35.00" data-name="VOID// Classic Cap">
    <h2>VOID// Classic Cap</h2>
    <label>Colore</label>
    <select class="color">
      <option value="black">Black</option>
      <option value="navy">Navy</option>
      <option value="cranberry">Cranberry</option>
      <option value="spruce">Spruce</option>
      <option value="darkgray">Dark Gray</option>
      <option value="khakhi">Khakhi</option>
      <option value="stone">Stone</option>
      <option value="pink">Pink</option>
      <option value="lightblue">Light Blue</option>
    </select>

    <label>Quantità</label>
    <input type="number" class="qty" min="0" max="10" value="0" />
  </div>

  <div class="product" data-price="50.00" data-name="VOID// Minimalist Backpack">
    <h2>VOID// Minimalist Backpack</h2>
    <label>Quantità</label>
    <input type="number" class="qty" min="0" max="5" value="0" />
  </div>

  <div class="product" data-price="60.00" data-name="VOID// Glitch Pattern Pants">
    <h2>VOID// Glitch Pattern Pants</h2>
    <label>Taglia</label>
    <select class="size">
      <option value="2xs">2XS</option>
      <option value="xs">XS</option>
      <option value="s">S</option>
      <option value="m">M</option>
      <option value="l">L</option>
      <option value="xl">XL</option>
      <option value="2xl">2XL</option>
      <option value="3xl">3XL</option>
      <option value="4xl">4XL</option>
      <option value="5xl">5XL</option>
      <option value="6xl">6XL</option>
    </select>

    <label>Quantità</label>
    <input type="number" class="qty" min="0" max="10" value="0" />
  </div>

  <div id="cart-total">Totale: €0.00</div>

  <div id="paypal-button-container"></div>

</main>

<script src="https://www.paypal.com/sdk/js?client-id=AaBOuXFWcBGG3FEUSHcHLi_oMsbbfGn2r4I_yfShjiBs8-iL0z8SHAbyQDoJ4uJXDzvNYLNhYX3ivb-I&currency=EUR"></script>
<script>
  const products = document.querySelectorAll('.product');
  const cartTotalEl = document.getElementById('cart-total');

  function calcolaTotale() {
    let totale = 0;
    products.forEach(prod => {
      const prezzo = parseFloat(prod.dataset.price);
      const qtyInput = prod.querySelector('.qty');
      const qty = qtyInput ? parseInt(qtyInput.value) : 0;
      if(qty > 0) {
        totale += prezzo * qty;
      }
    });
    return totale.toFixed(2);
  }

  function aggiornaTotale() {
    const totale = calcolaTotale();
    cartTotalEl.textContent = `Totale: €${totale}`;
  }

  // Aggiorna totale ogni volta che cambia quantità o selezione
  products.forEach(prod => {
    const qtyInput = prod.querySelector('.qty');
    const selects = prod.querySelectorAll('select');
    if(qtyInput) qtyInput.addEventListener('input', aggiornaTotale);
    selects.forEach(sel => sel.addEventListener('change', aggiornaTotale));
  });

  aggiornaTotale();

  paypal.Buttons({
    createOrder: function(data, actions) {
      const totale = calcolaTotale();
      if(totale === "0.00") {
        alert("Per favore, seleziona almeno un prodotto prima di procedere al pagamento.");
        return;
      }
      return actions.order.create({
        purchase_units: [{
          amount: {
            value: totale
          },
          description: "Ordine voidshop"
        }],
        application_context: {
          shipping_preference: "GET_FROM_FILE"
        }
      });
    },
    onApprove: function(data, actions) {
      return actions.order.capture().then(function(details) {
        alert(`Pagamento completato da ${details.payer.name.given_name}. Grazie per il tuo ordine!`);
        // Qui puoi aggiungere codice per inviare i dati dell’ordine via email o backend
        location.reload();
      });
    }
  }).render('#paypal-button-container');
</script>

</body>
</html>
