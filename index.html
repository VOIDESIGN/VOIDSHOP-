<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>VOIDSHOP</title>
  <script src="https://www.paypal.com/sdk/js?client-id=EAIsXu9DmP1rhoNQLhCpOA7rfTviKhFEkF2fPf0YoMGUWW_4Op4foGOSIw37OMU7TdA_E4Hfwoa_Pt6U&currency=EUR&disable-funding=card,credit,sofort,sepa,mybank,wallet" defer></script>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      background: #fff;
      color: #000;
      margin: 0;
      padding: 0;
    }
    header {
      text-align: center;
      padding: 2rem 1rem;
      border-bottom: 1px solid #eee;
    }
    header h1 {
      font-size: 2.5rem;
      font-weight: 900;
      text-transform: uppercase;
      margin: 0;
    }
    header p {
      margin-top: 0.5rem;
      color: #555;
    }
    main {
      max-width: 900px;
      margin: 2rem auto;
      padding: 0 1rem;
    }
    .product {
      border: 1px solid #ccc;
      border-radius: 10px;
      padding: 1rem;
      margin-bottom: 2rem;
      background-color: #fafafa;
    }
    .product h2 {
      margin: 0 0 0.5rem;
      font-size: 1.4rem;
    }
    .price {
      font-weight: bold;
      margin-bottom: 0.75rem;
      color: #222;
    }
    label {
      display: block;
      margin-top: 0.5rem;
      margin-bottom: 0.25rem;
    }
    select, input[type="text"], input[type="email"] {
      padding: 0.5rem;
      margin-bottom: 0.75rem;
      display: block;
      width: 100%;
      max-width: 300px;
    }
    button {
      background-color: black;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      padding: 0.5rem;
      max-width: 300px;
      width: 100%;
      margin-bottom: 1rem;
    }
    .paypal-button-container {
      margin-top: 1rem;
    }
    @media screen and (max-width: 600px) {
      header h1 {
        font-size: 2rem;
      }
      .product {
        padding: 1rem 0.5rem;
      }
    }
  </style>
</head>
<body>

  <header>
    <h1>VOIDSHOP</h1>
    <p>Product Preview</p>
  </header>

  <main id="product-list"></main>

  <script>
    const formspreeURL = 'https://formspree.io/f/mdkdnzny';

    const products = [
      {
        id: 'summerbag',
        name: 'VOID// SummerBag',
        desc: 'White pochette, perfect for summer.',
        price: '1.00',
        options: []
      },
      {
        id: 'minimalpack',
        name: 'VOID// MinimalPack',
        desc: 'Minimalist black backpack, compact and durable design.',
        price: '1.00',
        options: []
      },
      {
        id: 'cap-white-text',
        name: 'VOID// Cap (white text)',
        desc: 'Cap with white VOID// embroidery.',
        price: '1.00',
        options: [
          {
            label: 'Color',
            name: 'color',
            values: ['Black', 'Navy', 'Cranberry', 'Spruce', 'Dark Gray', 'Khaki', 'Stone', 'Pink', 'Light Blue']
          }
        ]
      },
      {
        id: 'cap-black-text',
        name: 'VOID// Cap (black text)',
        desc: 'Cap with black VOID// embroidery.',
        price: '1.00',
        options: [
          {
            label: 'Color',
            name: 'color',
            values: ['Cranberry', 'Khaki', 'Stone', 'Pink', 'Light Blue', 'White']
          }
        ]
      },
      {
        id: 'tshirt',
        name: 'VOID// Tee',
        desc: 'T-shirt with central VOID// print.',
        price: '1.00',
        options: [
          {
            label: 'Color',
            name: 'color',
            values: ['Maroon', 'Black', 'Navy', 'Orange']
          },
          {
            label: 'Size',
            name: 'size',
            values: ['S', 'M', 'L', 'XL', '2XL', '3XL']
          }
        ]
      },
      {
        id: 'glitch-pants',
        name: 'VOID// Glitch Pants',
        desc: 'Pants with glitch theme.',
        price: '1.00',
        options: [
          {
            label: 'Size',
            name: 'size',
            values: ['2XS', 'XS', 'S', 'M', 'L', 'XL', '2XL', '3XL', '4XL', '5XL', '6XL']
          }
        ]
      },
      {
        id: 'cover-white-text',
        name: 'VOID// Cover (white text)',
        desc: 'Black iPhone case with white VOID// text.',
        price: '1.00',
        options: [
          {
            label: 'iPhone Model',
            name: 'model',
            values: ['iPhone 12', 'iPhone 12 Pro', 'iPhone 12 Pro Max', 'iPhone 13', 'iPhone 13 Pro', 'iPhone 13 Pro Max', 'iPhone 14', 'iPhone 14 Pro', 'iPhone 14 Pro Max', 'iPhone 15', 'iPhone 15 Pro', 'iPhone 15 Pro Max', 'iPhone 16', 'iPhone 16 Pro', 'iPhone 16 Pro Max']
          }
        ]
      },
      {
        id: 'cover-black-text',
        name: 'VOID// Cover (black text)',
        desc: 'White iPhone case with black VOID// text.',
        price: '1.00',
        options: [
          {
            label: 'iPhone Model',
            name: 'model',
            values: ['iPhone 12', 'iPhone 12 Pro', 'iPhone 12 Pro Max', 'iPhone 13', 'iPhone 13 Pro', 'iPhone 13 Pro Max', 'iPhone 14', 'iPhone 14 Pro', 'iPhone 14 Pro Max', 'iPhone 15', 'iPhone 15 Pro', 'iPhone 15 Pro Max', 'iPhone 16', 'iPhone 16 Pro', 'iPhone 16 Pro Max']
          }
        ]
      }
    ];

    function createOptionsHTML(options, productId) {
      return options.map(option => {
        const optionsHTML = option.values.map(value => `<option value="${value}">${value}</option>`).join('');
        return `
          <label for="${option.name}-${productId}">${option.label}</label>
          <select id="${option.name}-${productId}" name="${option.name}" required>
            <option value="" disabled selected>Select ${option.label}</option>
            ${optionsHTML}
          </select>
        `;
      }).join('');
    }

    function createProductHTML(product) {
      return `
        <div class="product">
          <h2>${product.name}</h2>
          <div class="price">Price: â‚¬${product.price}</div>
          <p>${product.desc}</p>
          <form id="form-${product.id}">
            <label for="name-${product.id}">Name</label>
            <input type="text" id="name-${product.id}" name="name" required />
            <label for="email-${product.id}">Email</label>
            <input type="email" id="email-${product.id}" name="email" required />
            <label for="address-${product.id}">Shipping Address</label>
            <input type="text" id="address-${product.id}" name="address" placeholder="Street, City, ZIP, Country" required />
            ${createOptionsHTML(product.options, product.id)}
            <button type="submit">Confirm Details</button>
          </form>
          <div class="paypal-button-container" id="paypal-${product.id}" style="display:none;"></div>
        </div>
      `;
    }

    function sendOrderData(productName, name, email, address, options) {
      const formData = new FormData();
      formData.append('product', productName);
      formData.append('name', name);
      formData.append('email', email);
      formData.append('address', address);
      for (const [key, value] of Object.entries(options)) {
        formData.append(key, value);
      }
      return fetch(formspreeURL, {
        method: 'POST',
        body: formData,
        headers: { 'Accept': 'application/json' }
      });
    }

    function renderPayPalButton(containerId, product, buyerData) {
      paypal.Buttons({
        fundingSource: paypal.FUNDING.PAYPAL,
        style: { layout: 'vertical', color: 'black', shape: 'rect', label: 'buynow' },
        createOrder: function(data, actions) {
          return actions.order.create({
            purchase_units: [{
              amount: { value: product.price },
              description: `${product.name} - ${buyerData.name}`
            }]
          });
        },
        onApprove: function(data, actions) {
          sendOrderData(product.name, buyerData.name, buyerData.email, buyerData.address, buyerData.options)
            .then(response => {
              if (response.ok) {
                alert(`Payment completed for ${product.name}! Thank you.`);
              } else {
                alert('Failed to send order details. Please contact support.');
              }
            })
            .catch(() => alert('Failed to send order details. Please contact support.'));
        }
      }).render(containerId);
    }

    function setupProductForms() {
      products.forEach(product => {
        const form = document.getElementById(`form-${product.id}`);
        const paypalContainer = document.getElementById(`paypal-${product.id}`);

        form.addEventListener('submit', e => {
          e.preventDefault();
          const name = document.getElementById(`name-${product.id}`).value.trim();
          const email = document.getElementById(`email-${product.id}`).value.trim();
          const address = document.getElementById(`address-${product.id}`).value.trim();

          if (!name || !email || !address) {
            alert('Please fill in all required fields.');
            return;
          }

          const optionsData = {};
          product.options.forEach(opt => {
            const val = document.getElementById(`${opt.name}-${product.id}`).value;
            if (!val) {
              alert(`Please select ${opt.label}.`);
              return;
            }
            optionsData[opt.name] = val;
          });

          form.style.display = 'none';
          paypalContainer.style.display = 'block';
          renderPayPalButton(`#paypal-${product.id}`, product, { name, email, address, options: optionsData });
        });
      });
    }

    window.addEventListener('load', () => {
      const productList = document.getElementById('product-list');
      products.forEach(product => {
        productList.innerHTML += createProductHTML(product);
      });
      setupProductForms();
    });
  </script>

</body>
</html>
